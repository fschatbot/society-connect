"use strict";(self.webpackChunksociety_connect=self.webpackChunksociety_connect||[]).push([[416],{7416:function(e,t,n){n.r(t),n.d(t,{PostScroll:function(){return b},default:function(){return g}});var i=n(8683),r=n(9439),o=n(7313),l=n(5054),a=n(271),s=n(2524),c=[0];function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}function d(e){var t,n=function(e){var t,n,i=null!=(t=null==e?void 0:e.rootMargin)?t:"0px",r=null!=(n=null==e?void 0:e.threshold)?n:c,l=(0,o.useRef)(null),a=(0,o.useRef)(null),s=(0,o.useRef)(null),u=(0,o.useState)(),d=u[0],f=u[1],p=(0,o.useCallback)((function(){var e=s.current;null==e||e.disconnect(),s.current=null}),[]),h=(0,o.useCallback)((function(){var e=l.current;if(e){var t=a.current,n=new IntersectionObserver((function(e){var t=e[0];f(t)}),{root:t,rootMargin:i,threshold:r});n.observe(e),s.current=n}}),[i,r]),v=(0,o.useCallback)((function(){p(),h()}),[h,p]),k=(0,o.useCallback)((function(e){l.current=e,v()}),[v]),b=(0,o.useCallback)((function(e){a.current=e,v()}),[v]);return(0,o.useEffect)((function(){return v(),function(){p()}}),[v,p]),[k,{entry:d,rootRef:b}]}(e),i=n[0],r=n[1],l=Boolean(null==(t=r.entry)?void 0:t.isIntersecting),a=(0,o.useState)(l),s=a[0],d=a[1];return l&&!s&&d(!0),[i,u({},r,{isVisible:l,wasEverVisible:s})]}var f=function(e){var t=e.loading,n=e.hasNextPage,i=e.onLoadMore,r=e.rootMargin,l=e.disabled,a=e.delayInMs,s=void 0===a?100:a,c=d({rootMargin:r}),u=c[0],f=c[1],p=f.rootRef,h=f.isVisible,v=!l&&!t&&h&&n;return(0,o.useEffect)((function(){if(v){var e=setTimeout((function(){i()}),s);return function(){clearTimeout(e)}}}),[i,v,s]),[u,{rootRef:p}]},p=n(2975),h=n.n(p),v=n(2135),k=n(6417);function b(e){var t=e.filter,n=void 0===t?function(){return!0}:t,c=(0,o.useState)([]),u=(0,r.Z)(c,2),d=u[0],p=u[1],b=(0,o.useState)(!0),g=(0,r.Z)(b,2),m=g[0],y=g[1],j=(0,o.useState)(!1),O=(0,r.Z)(j,2),x=O[0],S=O[1],P=(0,o.useState)({liked:[],disliked:[]}),_=(0,r.Z)(P,2),M=_[0],Z=_[1];(0,o.useEffect)((function(){(0,l.IF)().then((function(e){var t=e.liked,n=e.disliked;Z({liked:t,disliked:n})}))}),[]);var w=f({loading:x,hasNextPage:m,onLoadMore:function(){return console.log("Fetching data"),S(!0),l.DB.ref("posts").limitToFirst(d.length+10).once("value").then((function(e){var t=[];return e.forEach((function(e){var i=e.val();n(i)&&t.push((0,l.dX)("accounts/".concat(e.val().author,"/PFP")).then((function(t){return i.id=e.key,i.authorPFP=t.val(),i})))})),Promise.all(t)})).then((function(e){console.log(e),d.length!==e.length&&e.length%10===0||y(!1),p(e),S(!1)}))},rootMargin:"0px 0px 400px 0px"}),N=(0,r.Z)(w,1)[0];return(0,k.jsxs)("div",{className:"postList",children:[d.map((function(e){return(0,k.jsxs)("div",{className:"post",postdata:JSON.stringify(e),children:[(0,k.jsx)("img",{className:"post__image",src:e.image,alt:""}),(0,k.jsxs)("div",{className:"bar",children:[(0,k.jsxs)(v.rU,{className:"title",to:"/profile/".concat(e.author),children:[(0,k.jsx)("img",{className:"PFP",src:e.authorPFP,alt:""}),(0,k.jsx)("h1",{children:e.title})]}),(0,k.jsxs)("div",{className:"reactions",children:[(0,k.jsx)(s.JO,{icon:M.liked.includes(e.id)?"ph:heart-fill":"ph:heart",color:M.liked.includes(e.id)?"rgb(229 66 148)":"#fb923c",onClick:function(){return function(e){var t=(0,i.Z)({},M),n={};M.liked.includes(e)?(t.liked=M.liked.filter((function(t){return t!==e})),n["accounts/".concat(localStorage.user,"/liked")]=t.liked,n["posts/".concat(e,"/liked")]=a.Z.database.ServerValue.increment(-1)):(t.liked.push(e),t.disliked=M.disliked.filter((function(t){return t!==e})),n["accounts/".concat(localStorage.user,"/liked")]=t.liked,n["posts/".concat(e,"/liked")]=a.Z.database.ServerValue.increment(1),M.disliked.includes(e)&&(n["accounts/".concat(localStorage.user,"/disliked")]=t.disliked,n["posts/".concat(e,"/disliked")]=a.Z.database.ServerValue.increment(-1))),console.log(n),l.DB.ref().update(n),Z((0,i.Z)({},t))}(e.id)}}),e.liked,(0,k.jsx)(s.JO,{icon:M.disliked.includes(e.id)?"fluent:thumb-dislike-16-filled":"fluent:thumb-dislike-16-regular",color:M.disliked.includes(e.id)?"#98571b":"#fb923c",onClick:function(){return function(e){var t=(0,i.Z)({},M),n={};M.disliked.includes(e)?(t.disliked=M.disliked.filter((function(t){return t!==e})),n["accounts/".concat(localStorage.user,"/disliked")]=t.disliked,n["posts/".concat(e,"/disliked")]=a.Z.database.ServerValue.increment(-1)):(t.disliked.push(e),t.liked=M.liked.filter((function(t){return t!==e})),n["accounts/".concat(localStorage.user,"/disliked")]=t.disliked,n["posts/".concat(e,"/disliked")]=a.Z.database.ServerValue.increment(1),M.liked.includes(e)&&(n["accounts/".concat(localStorage.user,"/liked")]=t.liked,n["posts/".concat(e,"/liked")]=a.Z.database.ServerValue.increment(-1))),console.log(n),l.DB.ref().update(n),Z((0,i.Z)({},t))}(e.id)}}),e.disliked]})]}),(0,k.jsx)("p",{className:"description",children:e.description})]},e.id)})),(x||m)&&(0,k.jsx)("div",{ref:N,children:(0,k.jsx)(h(),{color:"#36d7b7",size:10})})]})}var g=function(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("nav",{className:"gossipNav",children:[(0,k.jsx)("h1",{children:"Gossip"}),(0,k.jsx)(s.JO,{icon:"ph:plus-circle"})]}),(0,k.jsx)(b,{})]})}},2975:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(7313)),c=n(4660),u=(0,n(7253).createAnimation)("BeatLoader","50% {transform: scale(0.75);opacity: 0.2} 100% {transform: scale(1);opacity: 1}","beat");t.default=function(e){var t=e.loading,n=void 0===t||t,r=e.color,o=void 0===r?"#000000":r,l=e.speedMultiplier,d=void 0===l?1:l,f=e.cssOverride,p=void 0===f?{}:f,h=e.size,v=void 0===h?15:h,k=e.margin,b=void 0===k?2:k,g=a(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),m=i({display:"inherit"},p),y=function(e){return{display:"inline-block",backgroundColor:o,width:(0,c.cssValue)(v),height:(0,c.cssValue)(v),margin:(0,c.cssValue)(b),borderRadius:"100%",animation:"".concat(u," ").concat(.7/d,"s ").concat(e%2?"0s":"".concat(.35/d,"s")," infinite linear"),animationFillMode:"both"}};return n?s.createElement("span",i({style:m},g),s.createElement("span",{style:y(1)}),s.createElement("span",{style:y(2)}),s.createElement("span",{style:y(3)})):null}}}]);